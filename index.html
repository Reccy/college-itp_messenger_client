<html>
	<head>
		<meta charset="utf-8">
		<title>Tinglr Messenger</title>

		<!-- OnsenUI plugin -->
		<link rel="stylesheet" href="bower_components/OnsenUI/css/onsenui.css"/>
	    <link rel="stylesheet" href="bower_components/OnsenUI/css/onsen-css-components-custom.css">
	    <script src="bower_components/angular/angular.js"></script>
	    <script src="bower_components/OnsenUI/js/onsenui.js"></script>

		<!-- Javascript plugins for client -->
		<script src="js/pubnub-3.10.3.min.js"></script>
		<script src="js/jquery-2.2.0.min.js"></script>
		<script src="js/server.js"></script>

	    <script>
			var module = ons.bootstrap('my-app', ['onsen']);
			module.controller('AppController', function($scope) {});
    	    module.controller('PageController', function($scope) {
                ons.ready(function() {});

                $scope.tempLogin = function(newUsername){
                    tinglrNav.pushPage('main_start.html', {animation : 'fade'});
                    $scope.username = newUsername;
                    sendMessage(newUsername);
                };
                
                $scope.promptUser = function(){
                    ons.notification.prompt({
                        title: 'Start Chat',
                        message: 'Who do you want to connect to?',
                        callback: function(otherUser) {
                            sendMessage(otherUser);
                        }
                    });
                }
                
                $scope.write = function(side, msg){
                    switch(side){
        	            case 'left':
        	                console.log(msg);
        	                $scope.inputMSG = '';
        	                break;
                        case 'right':
                            console.log(msg);
                            $scope.inputMSG = '';
                            break;
                        default:
                            console.log(msg);
                            $scope.inputMSG = '';
                            //console.log("INVALID SIDE!");
    	            }
                }
            });
	      	function reset(){
	      	    menu.closeMenu();
	      	    tinglrNav.resetToPage('landingscreen.html', {animation : 'fade'});
	        }
	    </script>
	    
	    <!-- Stylesheet for message boxes -->
	    <style>
	        .msgBoxLeft{
	            width:100%;
	            float:left;
	            margin-left:10px;
	        }
	        
	        .msgBoxLeft > p{
	            float:left;
	            color:white;
	            background-color:#3498db;
	            padding:5px;
	            max-width:60%;
	        }
	        
	        .msgBoxRight{
	            width:100%;
	            float:right;
	            margin-right:10px;
	        }
	        
	        .msgBoxRight > p{
	            float:right;
	            color:white;
	            background-color:#9b59b6;
	            padding:5px;
	            max-width:60%;
	        }
	    </style>
	</head>
	
	<body ng-controller="AppController">
		
		<!-- Other templates -->
        
        <ons-template id="menu.html">
            <ons-list>
                <ons-list-item modifier="chevron" ng-click="menu.setMainPage('main.html', {closeMenu: true})">
                    Conversations
                </ons-list-item>
                <ons-list-item modifier="chevron" ng-click="menu.setMainPage('profile.html', {closeMenu: true})">
                    Profile
                </ons-list-item>
                <ons-list-item modifier="chevron" onclick="reset()">
                    Logout
                </ons-list-item>
            </ons-list>
        </ons-template>
		
		<!-- App Structure Code Start -->

        <ons-sliding-menu main-page="start.html" menu-page="menu.html" side="left" type="push" max-slide-distance="250px" var="menu" swipeable=false></ons-sliding-menu>
        
        <!-- Standard start code -->
        <ons-template id="start.html">
            <ons-navigator title="Navigator" var="tinglrNav" page="splash.html"></ons-navigator>
        </ons-template>
        
        <!-- TEST -->
        <!--<ons-template id="start.html">-->
        <!--    <ons-navigator title="Navigator" var="tinglrNav" page="landingscreen.html"></ons-navigator>-->
        <!--</ons-template>-->
        
        <!-- Splash Screen for server init -->
        <ons-template id="splash.html">
            <ons-page style="background: url('images/mainscreenbg.png'); background-position:center; background-repeat:no-repeat; background-size:cover;">
                <div style="text-align:center; margin-top:50%;">
                    <h4 style="color:white;">Starting Tinglr...</h4> 
                    <i class="fa fa-circle-o-notch fa-spin" style="font-size:24px; color:white;"></i>
                </div>
            </ons-page>
        </ons-template>
        
        <ons-template id="landingscreen.html">
            <ons-page style="background: url('images/mainscreenbg.png'); background-position:center; background-repeat:no-repeat; background-size:cover;">
                <div style="text-align:center;">
                    <div class="fitlogo">
                        <img src="images/Tinglr_logo.png"></img>
                    </div>
                    <div class="container">
                    <!--<h1 id="fittext1">Tinglr Messenger</h1>-->
                    </div>
                    <h3>Messenger Prototype</h3>
                    <ons-bottom-toolbar style="height: 130px; background: transparent; border: none;">
                        <div style="text-align: center" class="content-padded">
                            <ons-button class="button--large" ng-click="tinglrNav.pushPage('login.html', {animation : 'lift'})">Login</ons-button>
                            <br>
                            <ons-button class="button--large" ng-click="tinglrNav.pushPage('register.html', {animation : 'lift'})">Register</ons-button>
                        </div>
                    </ons-bottom-toolbar>
                </div>    
            </ons-page>
        </ons-template>
        
        <ons-template id="connection_error.html">
            <ons-page style="background: url('images/mainscreenbg.png'); background-position:center; background-repeat:no-repeat; background-size:cover;">
                <div style="text-align:center; margin-top:50%;">
                    <h4 style="color:white;">Error Connecting to Server!</h4> 
                    <h4 style="color:white;">Reconnecting...</h4> 
                    <i class="fa fa-circle-o-notch fa-spin" style="font-size:24px; color:white;"></i>
                </div>
            </ons-page>
        </ons-template>
        
        <ons-template id="login.html">
            <ons-page ng-controller="PageController">
                <ons-toolbar>
					<div class="left">
						<ons-toolbar-button ng-click="tinglrNav.popPage('landingscreen.html', {animation : 'fade'})">
				          <ons-icon icon="fa fa-chevron-circle-left"></ons-icon>
				        </ons-toolbar-button>
					</div>
					<div class="center">Tinglr</div>
				</ons-toolbar>
                <div style="text-align:center;">
                    <h1>Login Page</h1>
                        <ul class="list">
                          <li class="list__item">
                             <input ng-model="loginUsername" type="text" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="User Name">
                          </li>
                          <li class="list__item">
                            <input type="password" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="Password">
                          </li>
                        </ul>
                        <!--<div class="login-form">
                            <input type="email" class="text-input--underbar" placeholder="Email" value="">
                            <input type="password" class="text-input--underbar" placeholder="Password" value="">
                            <br><br>
                            <ons-button modifier="quiet" class="forgot-password">Forgot password?</ons-button>
                        </div>-->
                    <ons-bottom-toolbar style="height: 65px; background: transparent; border: none;">
                        <div style="text-align: center" class="content-padded">
                            <ons-button class="button--large" ng-click="tempLogin(loginUsername);">Submit</ons-button>            
                        </div>
                    </ons-bottom-toolbar>
                </div>
            </ons-page>
        </ons-template>
        
        <ons-template id="register.html">
            <ons-page ng-controller="PageController">
                <ons-toolbar>
					<div class="left">
						<ons-toolbar-button ng-click="tinglrNav.popPage('landingscreen.html', {animation : 'fade'})">
				          <ons-icon icon="fa fa-chevron-circle-left"></ons-icon>
				        </ons-toolbar-button>
					</div>
					<div class="center">Tinglr</div>
				</ons-toolbar>
                <div style="text-align:center;">
                    <h1>Register Page</h1>
                        <ul class="list">
                          <li class="list__item">
                            <input type="text" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="First Name">
                          </li>
                          <li class="list__item">
                            <input type="text" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="Surname">
                          </li>                          
                          <li class="list__item">
                            <input type="date" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="DOB">
                          </li>                          
                          <li class="list__item">
                            <input ng-model="registerUsername" type="text" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="User Name">
                          </li>                          
                          <li class="list__item">
                            <input type="email" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="Email">
                          </li>                          
                          <li class="list__item">
                            <input type="password" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="Password">
                          </li>
                          <li class="list__item">
                            <input type="password" class="text-input text-input--transparent" style="width:100%; margin-top:4px;" placeholder="Confirm Password">
                          </li>
                        </ul>
                        <!--<div class="register-form">
                            <input type="text" class="text-input--underbar" placeholder="First Name" value="">
                            <input type="text" class="text-input--underbar" placeholder="Surname" value="">
                            <input type="date" class="text-input--underbar" placeholder="Date of birth" value="">
                            <input type="text" class="text-input--underbar" placeholder="User Name" value="">
                            <input type="email" class="text-input--underbar" placeholder="Email" value="">
                            <input type="password" class="text-input--underbar" placeholder="Password" value="">
                            <input type="password" class="text-input--underbar" placeholder="Confirm Password" value="">
                        </div>-->
                        </ons-bottom-toolbar>
                    <ons-bottom-toolbar style="height: 65px; background: transparent; border: none;">
                        <div style="text-align: center" class="content-padded">
                            <ons-button class="button--large" ng-click="tempLogin(registerUsername);">Register</ons-button>            
                        </div>
                    </ons-bottom-toolbar>
                </div>
            </ons-page>
        </ons-template>
        
        <!-- Main Pages -->
        <ons-template id="main_start.html">
            <ons-page>
            	<ons-toolbar>
					<div class="left">
						<ons-toolbar-button ng-click="menu.toggleMenu()">
				          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;"></ons-icon>
				        </ons-toolbar-button>
					</div>
					<div class="center">Conversations</div>
					<div class="right">
					    <ons-toolbar-button ng-click="tinglrNav.pushPage('search.html', {animation : 'fade'})">
					        <ons-icon icon="fa fa-search"></ons-icon>   
					    </ons-toolbar-button>
					</div>
				</ons-toolbar>
				<ons-scroller>
                  <ons-list>
                    <ons-list-header>Connected Friends</ons-list-header>
                    <ons-list-item modifier="chevron" ng-click="tinglrNav.pushPage('conversation.html', {animation : 'lift'})">Demo User</ons-list-item>
                  </ons-list>
                </ons-scroller>
            </ons-page>
        </ons-template>
        
        <ons-template id="main.html">
            <ons-navigator title="Navigator" var="tinglrNav" page="main_start.html"></ons-navigator>
        </ons-template>
        <!-- End of Main Page -->
        
        <ons-template id="profile.html">
            <ons-navigator title="Navigator" var="tinglrNav">
                <ons-page>
                	<ons-toolbar>
    					<div class="left">
    						<ons-toolbar-button ng-click="menu.toggleMenu()">
    				          <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;"></ons-icon>
    				        </ons-toolbar-button>
    					</div>
    					<div class="center">Profile</div>
    					<!--<div class="right"></div>-->
    				</ons-toolbar>
                    <div style="text-align:center;">
                        <h1>Your Profile</h1>
                    </div>
                </ons-page>    
            </ons-navigator>
        </ons-template>
        
        <!--  Template to search for other user -->
        <ons-template id="search.html">
            <ons-page>
            	<ons-toolbar>
					<div class="left">
						<ons-toolbar-button ng-click="tinglrNav.popPage('search.html', {animation : 'fade'})">
					        <ons-icon icon="fa fa-chevron-circle-left"></ons-icon>   
					    </ons-toolbar-button>
					</div>
					<div class="center">Search</div>
					<div class="right"></div>
				</ons-toolbar>
				<input type="search" class="search-input" placeholder="Search...">
				
				<ons-scroller>
                  <ons-list>
                    <ons-list-item modifier="tappable">User 1</ons-list-item>
                    <ons-list-item modifier="tappable">User 2</ons-list-item>
                    <ons-list-item modifier="tappable">User 3</ons-list-item>
                    <ons-list-item modifier="tappable">User 4</ons-list-item>
                    <ons-list-item modifier="tappable">User 5</ons-list-item>
                    <ons-list-item modifier="tappable">User 6</ons-list-item>
                    <ons-list-item modifier="tappable">User 7</ons-list-item>
                    <ons-list-item modifier="tappable">User 8</ons-list-item>
                    <ons-list-item modifier="tappable">User 9</ons-list-item>
                    <ons-list-item modifier="tappable">User 10</ons-list-item>
                    <ons-list-item modifier="tappable">User 11</ons-list-item>
                    <ons-list-item modifier="tappable">User 12</ons-list-item>
                    <ons-list-item modifier="tappable">User 13</ons-list-item>
                    <ons-list-item modifier="tappable">User 14</ons-list-item>
                    <ons-list-item modifier="tappable">User 15</ons-list-item>
                    <ons-list-item modifier="tappable">User 16</ons-list-item>
                    <ons-list-item modifier="tappable">User 17</ons-list-item>
                    <ons-list-item modifier="tappable">User 18</ons-list-item>
                    <ons-list-item modifier="tappable">User 19</ons-list-item>
                    <ons-list-item modifier="tappable">User 20</ons-list-item>
                  </ons-list>
                </ons-scroller>
            </ons-page>
        </ons-template>
        
        <!-- Template for user's conversation -->
        <ons-template id="conversation.html">
            <ons-page ng-controller="PageController" ng-init="promptUser();">
                <ons-toolbar>
					<div class="left">
						<ons-toolbar-button ng-click="tinglrNav.popPage('search.html', {animation : 'fade'})">
					        <ons-icon icon="fa fa-chevron-circle-left"></ons-icon>   
					    </ons-toolbar-button>
					</div>
					<div class="center">Demo User</div>
					<div class="right"></div>
				</ons-toolbar>
			    <ons-scroller style="background: url('images/mainscreenbg.png'); background-position:center; background-repeat:no-repeat; background-size:cover;max-height:80%;">
			        <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
				    <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
				    <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
				    <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxLeft">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis molestie viverra ullamcorper. Aliquam eu erat convallis lectus aliquet volutpat eget id.</p>    
				    </div>
				    <div class="msgBoxRight">
				        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque aliquet, arcu in suscipit rhoncus, magna est auctor mauris, at bibendum posuere.</p>    
				    </div>
			    </ons-scroller>
			    <div style="border-top:solid #666699;">
                <textarea ng-model="inputMSG" class="textarea" style="margin:0;width:100%;background-color:white;" placeholder="Message..."></textarea>
                <ons-button class="button--large" ng-click="write('left',inputMSG)">Send Message</ons-button>            
            </ons-page>
        </ons-template>
		<!-- App Structure Code End -->
		
	</body>
</html>